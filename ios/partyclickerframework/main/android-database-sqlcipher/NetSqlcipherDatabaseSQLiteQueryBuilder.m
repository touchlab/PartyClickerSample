//
//  Generated by the J2ObjC translator.  DO NOT EDIT!
//

#include "AndroidProviderBaseColumns.h"
#include "IOSClass.h"
#include "IOSObjectArray.h"
#include "J2ObjC_source.h"
#include "NetSqlcipherCursor.h"
#include "NetSqlcipherDatabaseSQLiteDatabase.h"
#include "NetSqlcipherDatabaseSQLiteQueryBuilder.h"
#include "NetSqlcipherDatabaseUtils.h"
#include "android/text/TextUtils.h"
#include "android/util/Log.h"
#include "java/lang/CharSequence.h"
#include "java/lang/IllegalArgumentException.h"
#include "java/lang/StringBuilder.h"
#include "java/util/Iterator.h"
#include "java/util/Map.h"
#include "java/util/Set.h"
#include "java/util/regex/Matcher.h"
#include "java/util/regex/Pattern.h"

@interface NetSqlcipherDatabaseSQLiteQueryBuilder () {
 @public
  id<JavaUtilMap> mProjectionMap_;
  NSString *mTables_;
  JavaLangStringBuilder *mWhereClause_;
  jboolean mDistinct_;
  id<NetSqlcipherDatabaseSQLiteDatabase_CursorFactory> mFactory_;
  jboolean mStrictProjectionMap_;
}

+ (void)appendClauseWithJavaLangStringBuilder:(JavaLangStringBuilder *)s
                                 withNSString:(NSString *)name
                                 withNSString:(NSString *)clause;

+ (void)appendClauseEscapeClauseWithJavaLangStringBuilder:(JavaLangStringBuilder *)s
                                             withNSString:(NSString *)name
                                             withNSString:(NSString *)clause;

- (IOSObjectArray *)computeProjectionWithNSStringArray:(IOSObjectArray *)projectionIn;

@end

J2OBJC_FIELD_SETTER(NetSqlcipherDatabaseSQLiteQueryBuilder, mProjectionMap_, id<JavaUtilMap>)
J2OBJC_FIELD_SETTER(NetSqlcipherDatabaseSQLiteQueryBuilder, mTables_, NSString *)
J2OBJC_FIELD_SETTER(NetSqlcipherDatabaseSQLiteQueryBuilder, mWhereClause_, JavaLangStringBuilder *)
J2OBJC_FIELD_SETTER(NetSqlcipherDatabaseSQLiteQueryBuilder, mFactory_, id<NetSqlcipherDatabaseSQLiteDatabase_CursorFactory>)

inline NSString *NetSqlcipherDatabaseSQLiteQueryBuilder_get_TAG();
static NSString *NetSqlcipherDatabaseSQLiteQueryBuilder_TAG = @"SQLiteQueryBuilder";
J2OBJC_STATIC_FIELD_OBJ_FINAL(NetSqlcipherDatabaseSQLiteQueryBuilder, TAG, NSString *)

inline JavaUtilRegexPattern *NetSqlcipherDatabaseSQLiteQueryBuilder_get_sLimitPattern();
static JavaUtilRegexPattern *NetSqlcipherDatabaseSQLiteQueryBuilder_sLimitPattern;
J2OBJC_STATIC_FIELD_OBJ_FINAL(NetSqlcipherDatabaseSQLiteQueryBuilder, sLimitPattern, JavaUtilRegexPattern *)

__attribute__((unused)) static void NetSqlcipherDatabaseSQLiteQueryBuilder_appendClauseWithJavaLangStringBuilder_withNSString_withNSString_(JavaLangStringBuilder *s, NSString *name, NSString *clause);

__attribute__((unused)) static void NetSqlcipherDatabaseSQLiteQueryBuilder_appendClauseEscapeClauseWithJavaLangStringBuilder_withNSString_withNSString_(JavaLangStringBuilder *s, NSString *name, NSString *clause);

__attribute__((unused)) static IOSObjectArray *NetSqlcipherDatabaseSQLiteQueryBuilder_computeProjectionWithNSStringArray_(NetSqlcipherDatabaseSQLiteQueryBuilder *self, IOSObjectArray *projectionIn);

J2OBJC_INITIALIZED_DEFN(NetSqlcipherDatabaseSQLiteQueryBuilder)

@implementation NetSqlcipherDatabaseSQLiteQueryBuilder

J2OBJC_IGNORE_DESIGNATED_BEGIN
- (instancetype)init {
  NetSqlcipherDatabaseSQLiteQueryBuilder_init(self);
  return self;
}
J2OBJC_IGNORE_DESIGNATED_END

- (void)setDistinctWithBoolean:(jboolean)distinct {
  mDistinct_ = distinct;
}

- (NSString *)getTables {
  return mTables_;
}

- (void)setTablesWithNSString:(NSString *)inTables {
  JreStrongAssign(&mTables_, inTables);
}

- (void)appendWhereWithJavaLangCharSequence:(id<JavaLangCharSequence>)inWhere {
  if (mWhereClause_ == nil) {
    JreStrongAssignAndConsume(&mWhereClause_, new_JavaLangStringBuilder_initWithInt_([((id<JavaLangCharSequence>) nil_chk(inWhere)) java_length] + 16));
  }
  if ([mWhereClause_ java_length] == 0) {
    [((JavaLangStringBuilder *) nil_chk(mWhereClause_)) appendWithChar:'('];
  }
  [((JavaLangStringBuilder *) nil_chk(mWhereClause_)) appendWithJavaLangCharSequence:inWhere];
}

- (void)appendWhereEscapeStringWithNSString:(NSString *)inWhere {
  if (mWhereClause_ == nil) {
    JreStrongAssignAndConsume(&mWhereClause_, new_JavaLangStringBuilder_initWithInt_([((NSString *) nil_chk(inWhere)) java_length] + 16));
  }
  if ([mWhereClause_ java_length] == 0) {
    [((JavaLangStringBuilder *) nil_chk(mWhereClause_)) appendWithChar:'('];
  }
  NetSqlcipherDatabaseUtils_appendEscapedSQLStringWithJavaLangStringBuilder_withNSString_(mWhereClause_, inWhere);
}

- (void)setProjectionMapWithJavaUtilMap:(id<JavaUtilMap>)columnMap {
  JreStrongAssign(&mProjectionMap_, columnMap);
}

- (void)setCursorFactoryWithNetSqlcipherDatabaseSQLiteDatabase_CursorFactory:(id<NetSqlcipherDatabaseSQLiteDatabase_CursorFactory>)factory {
  JreStrongAssign(&mFactory_, factory);
}

- (void)setStrictProjectionMapWithBoolean:(jboolean)flag {
  mStrictProjectionMap_ = flag;
}

+ (NSString *)buildQueryStringWithBoolean:(jboolean)distinct
                             withNSString:(NSString *)tables
                        withNSStringArray:(IOSObjectArray *)columns
                             withNSString:(NSString *)where
                             withNSString:(NSString *)groupBy
                             withNSString:(NSString *)having
                             withNSString:(NSString *)orderBy
                             withNSString:(NSString *)limit {
  return NetSqlcipherDatabaseSQLiteQueryBuilder_buildQueryStringWithBoolean_withNSString_withNSStringArray_withNSString_withNSString_withNSString_withNSString_withNSString_(distinct, tables, columns, where, groupBy, having, orderBy, limit);
}

+ (void)appendClauseWithJavaLangStringBuilder:(JavaLangStringBuilder *)s
                                 withNSString:(NSString *)name
                                 withNSString:(NSString *)clause {
  NetSqlcipherDatabaseSQLiteQueryBuilder_appendClauseWithJavaLangStringBuilder_withNSString_withNSString_(s, name, clause);
}

+ (void)appendClauseEscapeClauseWithJavaLangStringBuilder:(JavaLangStringBuilder *)s
                                             withNSString:(NSString *)name
                                             withNSString:(NSString *)clause {
  NetSqlcipherDatabaseSQLiteQueryBuilder_appendClauseEscapeClauseWithJavaLangStringBuilder_withNSString_withNSString_(s, name, clause);
}

+ (void)appendColumnsWithJavaLangStringBuilder:(JavaLangStringBuilder *)s
                             withNSStringArray:(IOSObjectArray *)columns {
  NetSqlcipherDatabaseSQLiteQueryBuilder_appendColumnsWithJavaLangStringBuilder_withNSStringArray_(s, columns);
}

- (id<NetSqlcipherCursor>)queryWithNetSqlcipherDatabaseSQLiteDatabase:(NetSqlcipherDatabaseSQLiteDatabase *)db
                                                    withNSStringArray:(IOSObjectArray *)projectionIn
                                                         withNSString:(NSString *)selection
                                                    withNSStringArray:(IOSObjectArray *)selectionArgs
                                                         withNSString:(NSString *)groupBy
                                                         withNSString:(NSString *)having
                                                         withNSString:(NSString *)sortOrder {
  return [self queryWithNetSqlcipherDatabaseSQLiteDatabase:db withNSStringArray:projectionIn withNSString:selection withNSStringArray:selectionArgs withNSString:groupBy withNSString:having withNSString:sortOrder withNSString:nil];
}

- (id<NetSqlcipherCursor>)queryWithNetSqlcipherDatabaseSQLiteDatabase:(NetSqlcipherDatabaseSQLiteDatabase *)db
                                                    withNSStringArray:(IOSObjectArray *)projectionIn
                                                         withNSString:(NSString *)selection
                                                    withNSStringArray:(IOSObjectArray *)selectionArgs
                                                         withNSString:(NSString *)groupBy
                                                         withNSString:(NSString *)having
                                                         withNSString:(NSString *)sortOrder
                                                         withNSString:(NSString *)limit {
  if (mTables_ == nil) {
    return nil;
  }
  NSString *sql = [self buildQueryWithNSStringArray:projectionIn withNSString:selection withNSStringArray:selectionArgs withNSString:groupBy withNSString:having withNSString:sortOrder withNSString:limit];
  if (AndroidUtilLog_isLoggableWithNSString_withInt_(NetSqlcipherDatabaseSQLiteQueryBuilder_TAG, AndroidUtilLog_DEBUG)) {
    AndroidUtilLog_dWithNSString_withNSString_(NetSqlcipherDatabaseSQLiteQueryBuilder_TAG, JreStrcat("$$", @"Performing query: ", sql));
  }
  return [((NetSqlcipherDatabaseSQLiteDatabase *) nil_chk(db)) rawQueryWithFactoryWithNetSqlcipherDatabaseSQLiteDatabase_CursorFactory:mFactory_ withNSString:sql withNSStringArray:selectionArgs withNSString:NetSqlcipherDatabaseSQLiteDatabase_findEditTableWithNSString_(mTables_)];
}

- (NSString *)buildQueryWithNSStringArray:(IOSObjectArray *)projectionIn
                             withNSString:(NSString *)selection
                        withNSStringArray:(IOSObjectArray *)selectionArgs
                             withNSString:(NSString *)groupBy
                             withNSString:(NSString *)having
                             withNSString:(NSString *)sortOrder
                             withNSString:(NSString *)limit {
  IOSObjectArray *projection = NetSqlcipherDatabaseSQLiteQueryBuilder_computeProjectionWithNSStringArray_(self, projectionIn);
  JavaLangStringBuilder *where = create_JavaLangStringBuilder_init();
  jboolean hasBaseWhereClause = mWhereClause_ != nil && [mWhereClause_ java_length] > 0;
  if (hasBaseWhereClause) {
    [where appendWithNSString:[((JavaLangStringBuilder *) nil_chk(mWhereClause_)) description]];
    [where appendWithChar:')'];
  }
  if (selection != nil && [selection java_length] > 0) {
    if (hasBaseWhereClause) {
      [where appendWithNSString:@" AND "];
    }
    [where appendWithChar:'('];
    [where appendWithNSString:selection];
    [where appendWithChar:')'];
  }
  return NetSqlcipherDatabaseSQLiteQueryBuilder_buildQueryStringWithBoolean_withNSString_withNSStringArray_withNSString_withNSString_withNSString_withNSString_withNSString_(mDistinct_, mTables_, projection, [where description], groupBy, having, sortOrder, limit);
}

- (NSString *)buildUnionSubQueryWithNSString:(NSString *)typeDiscriminatorColumn
                           withNSStringArray:(IOSObjectArray *)unionColumns
                             withJavaUtilSet:(id<JavaUtilSet>)columnsPresentInTable
                                     withInt:(jint)computedColumnsOffset
                                withNSString:(NSString *)typeDiscriminatorValue
                                withNSString:(NSString *)selection
                           withNSStringArray:(IOSObjectArray *)selectionArgs
                                withNSString:(NSString *)groupBy
                                withNSString:(NSString *)having {
  jint unionColumnsCount = ((IOSObjectArray *) nil_chk(unionColumns))->size_;
  IOSObjectArray *projectionIn = [IOSObjectArray arrayWithLength:unionColumnsCount type:NSString_class_()];
  for (jint i = 0; i < unionColumnsCount; i++) {
    NSString *unionColumn = IOSObjectArray_Get(unionColumns, i);
    if ([((NSString *) nil_chk(unionColumn)) isEqual:typeDiscriminatorColumn]) {
      IOSObjectArray_Set(projectionIn, i, JreStrcat("C$$$", '\'', typeDiscriminatorValue, @"' AS ", typeDiscriminatorColumn));
    }
    else if (i <= computedColumnsOffset || [((id<JavaUtilSet>) nil_chk(columnsPresentInTable)) containsWithId:unionColumn]) {
      IOSObjectArray_Set(projectionIn, i, unionColumn);
    }
    else {
      IOSObjectArray_Set(projectionIn, i, JreStrcat("$$", @"NULL AS ", unionColumn));
    }
  }
  return [self buildQueryWithNSStringArray:projectionIn withNSString:selection withNSStringArray:selectionArgs withNSString:groupBy withNSString:having withNSString:nil withNSString:nil];
}

- (NSString *)buildUnionQueryWithNSStringArray:(IOSObjectArray *)subQueries
                                  withNSString:(NSString *)sortOrder
                                  withNSString:(NSString *)limit {
  JavaLangStringBuilder *query = create_JavaLangStringBuilder_initWithInt_(128);
  jint subQueryCount = ((IOSObjectArray *) nil_chk(subQueries))->size_;
  NSString *unionOperator = mDistinct_ ? @" UNION " : @" UNION ALL ";
  for (jint i = 0; i < subQueryCount; i++) {
    if (i > 0) {
      [query appendWithNSString:unionOperator];
    }
    [query appendWithNSString:IOSObjectArray_Get(subQueries, i)];
  }
  NetSqlcipherDatabaseSQLiteQueryBuilder_appendClauseWithJavaLangStringBuilder_withNSString_withNSString_(query, @" ORDER BY ", sortOrder);
  NetSqlcipherDatabaseSQLiteQueryBuilder_appendClauseWithJavaLangStringBuilder_withNSString_withNSString_(query, @" LIMIT ", limit);
  return [query description];
}

- (IOSObjectArray *)computeProjectionWithNSStringArray:(IOSObjectArray *)projectionIn {
  return NetSqlcipherDatabaseSQLiteQueryBuilder_computeProjectionWithNSStringArray_(self, projectionIn);
}

- (void)dealloc {
  RELEASE_(mProjectionMap_);
  RELEASE_(mTables_);
  RELEASE_(mWhereClause_);
  RELEASE_(mFactory_);
  [super dealloc];
}

+ (const J2ObjcClassInfo *)__metadata {
  static J2ObjcMethodInfo methods[] = {
    { NULL, NULL, 0x1, -1, -1, -1, -1, -1, -1 },
    { NULL, "V", 0x1, 0, 1, -1, -1, -1, -1 },
    { NULL, "LNSString;", 0x1, -1, -1, -1, -1, -1, -1 },
    { NULL, "V", 0x1, 2, 3, -1, -1, -1, -1 },
    { NULL, "V", 0x1, 4, 5, -1, -1, -1, -1 },
    { NULL, "V", 0x1, 6, 3, -1, -1, -1, -1 },
    { NULL, "V", 0x1, 7, 8, -1, 9, -1, -1 },
    { NULL, "V", 0x1, 10, 11, -1, -1, -1, -1 },
    { NULL, "V", 0x1, 12, 1, -1, -1, -1, -1 },
    { NULL, "LNSString;", 0x9, 13, 14, -1, -1, -1, -1 },
    { NULL, "V", 0xa, 15, 16, -1, -1, -1, -1 },
    { NULL, "V", 0xa, 17, 16, -1, -1, -1, -1 },
    { NULL, "V", 0x9, 18, 19, -1, -1, -1, -1 },
    { NULL, "LNetSqlcipherCursor;", 0x1, 20, 21, -1, -1, -1, -1 },
    { NULL, "LNetSqlcipherCursor;", 0x1, 20, 22, -1, -1, -1, -1 },
    { NULL, "LNSString;", 0x1, 23, 24, -1, -1, -1, -1 },
    { NULL, "LNSString;", 0x1, 25, 26, -1, 27, -1, -1 },
    { NULL, "LNSString;", 0x1, 28, 29, -1, -1, -1, -1 },
    { NULL, "[LNSString;", 0x2, 30, 31, -1, -1, -1, -1 },
  };
  #pragma clang diagnostic push
  #pragma clang diagnostic ignored "-Wobjc-multiple-method-names"
  methods[0].selector = @selector(init);
  methods[1].selector = @selector(setDistinctWithBoolean:);
  methods[2].selector = @selector(getTables);
  methods[3].selector = @selector(setTablesWithNSString:);
  methods[4].selector = @selector(appendWhereWithJavaLangCharSequence:);
  methods[5].selector = @selector(appendWhereEscapeStringWithNSString:);
  methods[6].selector = @selector(setProjectionMapWithJavaUtilMap:);
  methods[7].selector = @selector(setCursorFactoryWithNetSqlcipherDatabaseSQLiteDatabase_CursorFactory:);
  methods[8].selector = @selector(setStrictProjectionMapWithBoolean:);
  methods[9].selector = @selector(buildQueryStringWithBoolean:withNSString:withNSStringArray:withNSString:withNSString:withNSString:withNSString:withNSString:);
  methods[10].selector = @selector(appendClauseWithJavaLangStringBuilder:withNSString:withNSString:);
  methods[11].selector = @selector(appendClauseEscapeClauseWithJavaLangStringBuilder:withNSString:withNSString:);
  methods[12].selector = @selector(appendColumnsWithJavaLangStringBuilder:withNSStringArray:);
  methods[13].selector = @selector(queryWithNetSqlcipherDatabaseSQLiteDatabase:withNSStringArray:withNSString:withNSStringArray:withNSString:withNSString:withNSString:);
  methods[14].selector = @selector(queryWithNetSqlcipherDatabaseSQLiteDatabase:withNSStringArray:withNSString:withNSStringArray:withNSString:withNSString:withNSString:withNSString:);
  methods[15].selector = @selector(buildQueryWithNSStringArray:withNSString:withNSStringArray:withNSString:withNSString:withNSString:withNSString:);
  methods[16].selector = @selector(buildUnionSubQueryWithNSString:withNSStringArray:withJavaUtilSet:withInt:withNSString:withNSString:withNSStringArray:withNSString:withNSString:);
  methods[17].selector = @selector(buildUnionQueryWithNSStringArray:withNSString:withNSString:);
  methods[18].selector = @selector(computeProjectionWithNSStringArray:);
  #pragma clang diagnostic pop
  static const J2ObjcFieldInfo fields[] = {
    { "TAG", "LNSString;", .constantValue.asLong = 0, 0x1a, -1, 32, -1, -1 },
    { "sLimitPattern", "LJavaUtilRegexPattern;", .constantValue.asLong = 0, 0x1a, -1, 33, -1, -1 },
    { "mProjectionMap_", "LJavaUtilMap;", .constantValue.asLong = 0, 0x2, -1, -1, 34, -1 },
    { "mTables_", "LNSString;", .constantValue.asLong = 0, 0x2, -1, -1, -1, -1 },
    { "mWhereClause_", "LJavaLangStringBuilder;", .constantValue.asLong = 0, 0x2, -1, -1, -1, -1 },
    { "mDistinct_", "Z", .constantValue.asLong = 0, 0x2, -1, -1, -1, -1 },
    { "mFactory_", "LNetSqlcipherDatabaseSQLiteDatabase_CursorFactory;", .constantValue.asLong = 0, 0x2, -1, -1, -1, -1 },
    { "mStrictProjectionMap_", "Z", .constantValue.asLong = 0, 0x2, -1, -1, -1, -1 },
  };
  static const void *ptrTable[] = { "setDistinct", "Z", "setTables", "LNSString;", "appendWhere", "LJavaLangCharSequence;", "appendWhereEscapeString", "setProjectionMap", "LJavaUtilMap;", "(Ljava/util/Map<Ljava/lang/String;Ljava/lang/String;>;)V", "setCursorFactory", "LNetSqlcipherDatabaseSQLiteDatabase_CursorFactory;", "setStrictProjectionMap", "buildQueryString", "ZLNSString;[LNSString;LNSString;LNSString;LNSString;LNSString;LNSString;", "appendClause", "LJavaLangStringBuilder;LNSString;LNSString;", "appendClauseEscapeClause", "appendColumns", "LJavaLangStringBuilder;[LNSString;", "query", "LNetSqlcipherDatabaseSQLiteDatabase;[LNSString;LNSString;[LNSString;LNSString;LNSString;LNSString;", "LNetSqlcipherDatabaseSQLiteDatabase;[LNSString;LNSString;[LNSString;LNSString;LNSString;LNSString;LNSString;", "buildQuery", "[LNSString;LNSString;[LNSString;LNSString;LNSString;LNSString;LNSString;", "buildUnionSubQuery", "LNSString;[LNSString;LJavaUtilSet;ILNSString;LNSString;[LNSString;LNSString;LNSString;", "(Ljava/lang/String;[Ljava/lang/String;Ljava/util/Set<Ljava/lang/String;>;ILjava/lang/String;Ljava/lang/String;[Ljava/lang/String;Ljava/lang/String;Ljava/lang/String;)Ljava/lang/String;", "buildUnionQuery", "[LNSString;LNSString;LNSString;", "computeProjection", "[LNSString;", &NetSqlcipherDatabaseSQLiteQueryBuilder_TAG, &NetSqlcipherDatabaseSQLiteQueryBuilder_sLimitPattern, "Ljava/util/Map<Ljava/lang/String;Ljava/lang/String;>;" };
  static const J2ObjcClassInfo _NetSqlcipherDatabaseSQLiteQueryBuilder = { "SQLiteQueryBuilder", "net.sqlcipher.database", ptrTable, methods, fields, 7, 0x1, 19, 8, -1, -1, -1, -1, -1 };
  return &_NetSqlcipherDatabaseSQLiteQueryBuilder;
}

+ (void)initialize {
  if (self == [NetSqlcipherDatabaseSQLiteQueryBuilder class]) {
    JreStrongAssign(&NetSqlcipherDatabaseSQLiteQueryBuilder_sLimitPattern, JavaUtilRegexPattern_compileWithNSString_(@"\\s*\\d+\\s*(,\\s*\\d+\\s*)?"));
    J2OBJC_SET_INITIALIZED(NetSqlcipherDatabaseSQLiteQueryBuilder)
  }
}

@end

void NetSqlcipherDatabaseSQLiteQueryBuilder_init(NetSqlcipherDatabaseSQLiteQueryBuilder *self) {
  NSObject_init(self);
  JreStrongAssign(&self->mProjectionMap_, nil);
  JreStrongAssign(&self->mTables_, @"");
  JreStrongAssign(&self->mWhereClause_, nil);
  self->mDistinct_ = false;
  JreStrongAssign(&self->mFactory_, nil);
}

NetSqlcipherDatabaseSQLiteQueryBuilder *new_NetSqlcipherDatabaseSQLiteQueryBuilder_init() {
  J2OBJC_NEW_IMPL(NetSqlcipherDatabaseSQLiteQueryBuilder, init)
}

NetSqlcipherDatabaseSQLiteQueryBuilder *create_NetSqlcipherDatabaseSQLiteQueryBuilder_init() {
  J2OBJC_CREATE_IMPL(NetSqlcipherDatabaseSQLiteQueryBuilder, init)
}

NSString *NetSqlcipherDatabaseSQLiteQueryBuilder_buildQueryStringWithBoolean_withNSString_withNSStringArray_withNSString_withNSString_withNSString_withNSString_withNSString_(jboolean distinct, NSString *tables, IOSObjectArray *columns, NSString *where, NSString *groupBy, NSString *having, NSString *orderBy, NSString *limit) {
  NetSqlcipherDatabaseSQLiteQueryBuilder_initialize();
  if (AndroidTextTextUtils_isEmptyWithJavaLangCharSequence_(groupBy) && !AndroidTextTextUtils_isEmptyWithJavaLangCharSequence_(having)) {
    @throw create_JavaLangIllegalArgumentException_initWithNSString_(@"HAVING clauses are only permitted when using a groupBy clause");
  }
  if (!AndroidTextTextUtils_isEmptyWithJavaLangCharSequence_(limit) && ![((JavaUtilRegexMatcher *) nil_chk([((JavaUtilRegexPattern *) nil_chk(NetSqlcipherDatabaseSQLiteQueryBuilder_sLimitPattern)) matcherWithJavaLangCharSequence:limit])) matches]) {
    @throw create_JavaLangIllegalArgumentException_initWithNSString_(JreStrcat("$$", @"invalid LIMIT clauses:", limit));
  }
  JavaLangStringBuilder *query = create_JavaLangStringBuilder_initWithInt_(120);
  [query appendWithNSString:@"SELECT "];
  if (distinct) {
    [query appendWithNSString:@"DISTINCT "];
  }
  if (columns != nil && columns->size_ != 0) {
    NetSqlcipherDatabaseSQLiteQueryBuilder_appendColumnsWithJavaLangStringBuilder_withNSStringArray_(query, columns);
  }
  else {
    [query appendWithNSString:@"* "];
  }
  [query appendWithNSString:@"FROM "];
  [query appendWithNSString:tables];
  NetSqlcipherDatabaseSQLiteQueryBuilder_appendClauseWithJavaLangStringBuilder_withNSString_withNSString_(query, @" WHERE ", where);
  NetSqlcipherDatabaseSQLiteQueryBuilder_appendClauseWithJavaLangStringBuilder_withNSString_withNSString_(query, @" GROUP BY ", groupBy);
  NetSqlcipherDatabaseSQLiteQueryBuilder_appendClauseWithJavaLangStringBuilder_withNSString_withNSString_(query, @" HAVING ", having);
  NetSqlcipherDatabaseSQLiteQueryBuilder_appendClauseWithJavaLangStringBuilder_withNSString_withNSString_(query, @" ORDER BY ", orderBy);
  NetSqlcipherDatabaseSQLiteQueryBuilder_appendClauseWithJavaLangStringBuilder_withNSString_withNSString_(query, @" LIMIT ", limit);
  return [query description];
}

void NetSqlcipherDatabaseSQLiteQueryBuilder_appendClauseWithJavaLangStringBuilder_withNSString_withNSString_(JavaLangStringBuilder *s, NSString *name, NSString *clause) {
  NetSqlcipherDatabaseSQLiteQueryBuilder_initialize();
  if (!AndroidTextTextUtils_isEmptyWithJavaLangCharSequence_(clause)) {
    [((JavaLangStringBuilder *) nil_chk(s)) appendWithNSString:name];
    [s appendWithNSString:clause];
  }
}

void NetSqlcipherDatabaseSQLiteQueryBuilder_appendClauseEscapeClauseWithJavaLangStringBuilder_withNSString_withNSString_(JavaLangStringBuilder *s, NSString *name, NSString *clause) {
  NetSqlcipherDatabaseSQLiteQueryBuilder_initialize();
  if (!AndroidTextTextUtils_isEmptyWithJavaLangCharSequence_(clause)) {
    [((JavaLangStringBuilder *) nil_chk(s)) appendWithNSString:name];
    NetSqlcipherDatabaseUtils_appendEscapedSQLStringWithJavaLangStringBuilder_withNSString_(s, clause);
  }
}

void NetSqlcipherDatabaseSQLiteQueryBuilder_appendColumnsWithJavaLangStringBuilder_withNSStringArray_(JavaLangStringBuilder *s, IOSObjectArray *columns) {
  NetSqlcipherDatabaseSQLiteQueryBuilder_initialize();
  jint n = ((IOSObjectArray *) nil_chk(columns))->size_;
  for (jint i = 0; i < n; i++) {
    NSString *column = IOSObjectArray_Get(columns, i);
    if (column != nil) {
      if (i > 0) {
        [((JavaLangStringBuilder *) nil_chk(s)) appendWithNSString:@", "];
      }
      [((JavaLangStringBuilder *) nil_chk(s)) appendWithNSString:column];
    }
  }
  [((JavaLangStringBuilder *) nil_chk(s)) appendWithChar:' '];
}

IOSObjectArray *NetSqlcipherDatabaseSQLiteQueryBuilder_computeProjectionWithNSStringArray_(NetSqlcipherDatabaseSQLiteQueryBuilder *self, IOSObjectArray *projectionIn) {
  if (projectionIn != nil && projectionIn->size_ > 0) {
    if (self->mProjectionMap_ != nil) {
      IOSObjectArray *projection = [IOSObjectArray arrayWithLength:projectionIn->size_ type:NSString_class_()];
      jint length = projectionIn->size_;
      for (jint i = 0; i < length; i++) {
        NSString *userColumn = IOSObjectArray_Get(projectionIn, i);
        NSString *column = [((id<JavaUtilMap>) nil_chk(self->mProjectionMap_)) getWithId:userColumn];
        if (column != nil) {
          IOSObjectArray_Set(projection, i, column);
          continue;
        }
        if (!self->mStrictProjectionMap_ && ([((NSString *) nil_chk(userColumn)) java_contains:@" AS "] || [userColumn java_contains:@" as "])) {
          IOSObjectArray_Set(projection, i, userColumn);
          continue;
        }
        @throw create_JavaLangIllegalArgumentException_initWithNSString_(JreStrcat("$$", @"Invalid column ", IOSObjectArray_Get(projectionIn, i)));
      }
      return projection;
    }
    else {
      return projectionIn;
    }
  }
  else if (self->mProjectionMap_ != nil) {
    id<JavaUtilSet> entrySet = [self->mProjectionMap_ entrySet];
    IOSObjectArray *projection = [IOSObjectArray arrayWithLength:[((id<JavaUtilSet>) nil_chk(entrySet)) size] type:NSString_class_()];
    id<JavaUtilIterator> entryIter = [entrySet iterator];
    jint i = 0;
    while ([((id<JavaUtilIterator>) nil_chk(entryIter)) hasNext]) {
      id<JavaUtilMap_Entry> entry_ = [entryIter next];
      if ([((NSString *) nil_chk([((id<JavaUtilMap_Entry>) nil_chk(entry_)) getKey])) isEqual:AndroidProviderBaseColumns__COUNT]) {
        continue;
      }
      IOSObjectArray_Set(projection, i++, [entry_ getValue]);
    }
    return projection;
  }
  return nil;
}

J2OBJC_CLASS_TYPE_LITERAL_SOURCE(NetSqlcipherDatabaseSQLiteQueryBuilder)
